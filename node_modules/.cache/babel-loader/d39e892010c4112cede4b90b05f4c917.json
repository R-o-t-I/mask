{"ast":null,"code":"import VKConnect from \"@vkontakte/vk-connect\";\nimport { setColorScheme } from \"../store/vk/actions\";\nimport { store } from '../../index';\nexport var initApp = function initApp() {\n  return function (dispatch) {\n    var VKConnectCallback = function VKConnectCallback(e) {\n      if (e.detail.type === 'VKWebAppUpdateConfig') {\n        if (store.getState().vkui.colorScheme !== e.detail.data.scheme) {\n          dispatch(setColorScheme(e.detail.data.scheme));\n        }\n      }\n    };\n\n    VKConnect.subscribe(VKConnectCallback);\n    return VKConnect.send('VKWebAppInit', {}).then(function (data) {\n      return data;\n    }).catch(function (error) {\n      return error;\n    });\n  };\n};\nexport var closeApp = function closeApp() {\n  return VKConnect.send(\"VKWebAppClose\", {\n    \"status\": \"success\"\n  }).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};\nexport var swipeBackOn = function swipeBackOn() {\n  return VKConnect.send(\"VKWebAppEnableSwipeBack\", {}).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};\nexport var swipeBackOff = function swipeBackOff() {\n  return VKConnect.send(\"VKWebAppDisableSwipeBack\", {}).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};","map":{"version":3,"sources":["/Users/alexander/Downloads/Сервисы/mask/src/js/services/VK.js"],"names":["VKConnect","setColorScheme","store","initApp","dispatch","VKConnectCallback","e","detail","type","getState","vkui","colorScheme","data","scheme","subscribe","send","then","catch","error","closeApp","swipeBackOn","swipeBackOff"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AAEA,SAAQC,cAAR,QAA6B,qBAA7B;AACA,SAASC,KAAT,QAAsB,aAAtB;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM,UAACC,QAAD,EAAc;AACvC,QAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,CAAD,EAAO;AAC7B,UAAIA,CAAC,CAACC,MAAF,CAASC,IAAT,KAAkB,sBAAtB,EAA8C;AAC1C,YAAGN,KAAK,CAACO,QAAN,GAAiBC,IAAjB,CAAsBC,WAAtB,KAAsCL,CAAC,CAACC,MAAF,CAASK,IAAT,CAAcC,MAAvD,EAA+D;AAC3DT,UAAAA,QAAQ,CAACH,cAAc,CAACK,CAAC,CAACC,MAAF,CAASK,IAAT,CAAcC,MAAf,CAAf,CAAR;AACH;AACJ;AACJ,KAND;;AAQAb,IAAAA,SAAS,CAACc,SAAV,CAAoBT,iBAApB;AACA,WAAOL,SAAS,CAACe,IAAV,CAAe,cAAf,EAA+B,EAA/B,EAAmCC,IAAnC,CAAwC,UAAAJ,IAAI,EAAI;AACnD,aAAOA,IAAP;AACH,KAFM,EAEJK,KAFI,CAEE,UAAAC,KAAK,EAAI;AACd,aAAOA,KAAP;AACH,KAJM,CAAP;AAKH,GAfsB;AAAA,CAAhB;AAiBP,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC1B,SAAOnB,SAAS,CAACe,IAAV,CAAe,eAAf,EAAgC;AACnC,cAAU;AADyB,GAAhC,EAEJC,IAFI,CAEC,UAAAJ,IAAI,EAAI;AACZ,WAAOA,IAAP;AACH,GAJM,EAIJK,KAJI,CAIE,UAAAC,KAAK,EAAI;AACd,WAAOA,KAAP;AACH,GANM,CAAP;AAOH,CARM;AAUP,OAAO,IAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC7B,SAAOpB,SAAS,CAACe,IAAV,CAAe,yBAAf,EAA0C,EAA1C,EAA8CC,IAA9C,CAAmD,UAAAJ,IAAI,EAAI;AAC9D,WAAOA,IAAP;AACH,GAFM,EAEJK,KAFI,CAEE,UAAAC,KAAK,EAAI;AACd,WAAOA,KAAP;AACH,GAJM,CAAP;AAKH,CANM;AAQP,OAAO,IAAMG,YAAY,GAAG,SAAfA,YAAe,GAAM;AAC9B,SAAOrB,SAAS,CAACe,IAAV,CAAe,0BAAf,EAA2C,EAA3C,EAA+CC,IAA/C,CAAoD,UAAAJ,IAAI,EAAI;AAC/D,WAAOA,IAAP;AACH,GAFM,EAEJK,KAFI,CAEE,UAAAC,KAAK,EAAI;AACd,WAAOA,KAAP;AACH,GAJM,CAAP;AAKH,CANM","sourcesContent":["import VKConnect from \"@vkontakte/vk-connect\";\n\nimport {setColorScheme} from \"../store/vk/actions\";\nimport { store } from '../../index';\n\nexport const initApp = () => (dispatch) => {\n    const VKConnectCallback = (e) => {\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\n            if(store.getState().vkui.colorScheme !== e.detail.data.scheme) {\n                dispatch(setColorScheme(e.detail.data.scheme));\n            }\n        }\n    };\n\n    VKConnect.subscribe(VKConnectCallback);\n    return VKConnect.send('VKWebAppInit', {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const closeApp = () => {\n    return VKConnect.send(\"VKWebAppClose\", {\n        \"status\": \"success\"\n    }).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const swipeBackOn = () => {\n    return VKConnect.send(\"VKWebAppEnableSwipeBack\", {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const swipeBackOff = () => {\n    return VKConnect.send(\"VKWebAppDisableSwipeBack\", {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};"]},"metadata":{},"sourceType":"module"}